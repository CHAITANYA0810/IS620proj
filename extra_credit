-- Anonymous PL/SQL Block for Project Execution
DECLARE
    -- Local variables for input parameters
    v_email VARCHAR2(100);
    v_category_name VARCHAR2(100);
    v_product_name VARCHAR2(100);
    v_quantity NUMBER;
    v_credit_card_number VARCHAR2(16);
    v_order_id NUMBER;
    v_reviewer_email VARCHAR2(100);
    v_stars_given NUMBER;
    v_review_text VARCHAR2(500);
    v_customer_id NUMBER;
    v_amount NUMBER;

BEGIN
    -- Member 1: Customers and CreditCards
    Add_Customer(custom_id_seq.nextval, 'Patti', 'Ordonez', 'patti1@gmail.com', 'Seattle', 'WA', '12345');
    Show_all_customers_in_state('WA');
    v_email := 'patti1@gmail.com';
    v_credit_card_number := '1234567890123456';
    Add_CreditCard(v_credit_card_number, Find_customer_ID(v_email), 'VISA', 2024, 08);
    Report_Cards_Expire(SYSDATE + INTERVAL '2' MONTH);

    -- Member 2: Product Categories and Products
    v_category_name := 'Electronics';
    Add_Category(v_category_name, 'Electronics Category Description');
    v_product_name := 'Laptop';
    v_quantity := 10;
    Add_Product(v_product_name, v_quantity, 999.99, v_category_name);
    Update_Inventory(FIND_PRODUCT_ID(v_product_name), 5);
    Report_Inventory;

    -- Member 3: Orders
    v_email := 'patti1@gmail.com';
    v_product_name := 'Laptop';
    v_quantity := 2;
    v_credit_card_number := '1234567890123456';
    Place_Order(v_email, v_product_name, v_quantity, v_credit_card_number);
    Show_Orders;
    Report_Orders_by_State('WA');
    Report_Inventory;

    -- Member 4: Invoices
    v_customer_id := FIND_CUSTOMER_ID(v_email);
    v_credit_card_number := '1234567890123456';
    v_amount := 1999.98;
    -- Ensure customer and credit card exist before creating an invoice
    IF v_customer_id IS NOT NULL AND Find_Credit_Card_ID(v_credit_card_number) IS NOT NULL THEN
        Invoice_Customer(Order_id_seq.nextval, v_customer_id, v_credit_card_number, v_amount);
    ELSE
        DBMS_OUTPUT.PUT_LINE('Error: Customer or Credit Card not found.');
    END IF;
    Report_Best_Customers(1000);
    Payments_to_CC;

    -- Member 5: Reviews and Recommendations
    v_reviewer_email := 'reviewer@example.com';
    v_stars_given := 5;
    v_review_text := 'Excellent product!';
    v_product_name := 'Laptop';
    Add_Review(v_reviewer_email, v_stars_given, v_product_name, v_review_text);
    Buy_Or_Beware(5);
    v_customer_id := FIND_CUSTOMER_ID(v_email);
    Recommend_To_Customer(v_customer_id);
    List_Recommendations;

    DBMS_OUTPUT.PUT_LINE('Project Execution Completed Successfully.');

EXCEPTION
    WHEN OTHERS THEN
        DBMS_OUTPUT.PUT_LINE('Error: ' || SQLERRM);
END;

